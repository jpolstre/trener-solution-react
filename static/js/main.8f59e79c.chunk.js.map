{"version":3,"sources":["assets/css/styles.ts","components/Layout/styles.ts","components/Dialog/styles.ts","components/Dialog/index.tsx","components/ItemList/styles.ts","components/ItemList/index.tsx","components/List/styles.ts","components/List/index.tsx","components/Select/styles.ts","services/queries.ts","components/Select/index.tsx","utils/index.ts","services/tables.ts","store/ducks/trener/actions.ts","pages/MyData/index.tsx","pages/Travels/Home/TravelsList.tsx","pages/Travels/Home/styles.ts","pages/Travels/Home/DataList.tsx","pages/Travels/Home/index.tsx","pages/Travels/NextTrains/index.tsx","pages/Travels/AllCostsNow/index.tsx","components/Content/styles.ts","components/Content/index.tsx","components/Header/styles.ts","components/Header/index.tsx","components/Tabs/styles.ts","components/Tabs/index.tsx","components/Loading/styles.ts","store/ducks/trener/index.ts","components/Loading/index.tsx","components/Layout/index.tsx","services/operations.ts","store/ducks/rootReducer.ts","store/ducks/trener/sagas.ts","store/ducks/rootSaga.ts","store/index.ts","App.tsx","index.tsx"],"names":["createGlobalStyle","Grid","styled","div","ETheme","OverlayStyled","ModalWrapperStyled","fadeIn","keyframes","ModalStyled","ModalContendStyled","ModalHeaderStyled","ModalCloseButtonStyled","ModalBodyStyled","ModalFooterStyled","ButtonStyled","button","props","color","PRIMARY","undefined","glossy","ButtonCmp","label","useModal","useState","isShowing","setIsShowing","timeoutHack","setTimeout","clearTimeout","Modal","hide","title","buttons","onOk","children","bodyRef","useRef","current","ReactDOM","createPortal","Fragment","aria-modal","aria-hidden","tabIndex","role","id","onClick","e","target","data-dismiss","aria-label","length","map","SECONDARY","document","body","Li","li","IconArrowRight","ChevronRight","Anchor","a","ItemList","labelLink","typeButton","Container","Caption","h3","List","EQueries","SelectContainer","Option","ToolInfoBar","InputFilter","input","IconClear","Clear","Select","options","onChange","currentValue","toolBar","onKeyEnter","refSelect","active","setActive","filter","setFilter","refActive","refOptionsFielter","useMemo","termsArray","toLowerCase","split","option","every","term","indexOf","scrollToActive","useCallback","container","activeElem","querySelector","scrollTo","element","to","duration","perTick","scrollTop","offsetTop","keyboardHandler","keyCode","code","index","findIndex","value","activeCurrent","preventDefault","useEffect","window","addEventListener","removeEventListener","onKeyDown","placeholder","parseInt","ref","key","className","tables","name","model","ai","pk","default","notNull","ActionTypes","initDataBase","nSQL","listDatabases","createDatabase","mode","query","exec","Promise","all","rawImport","ranges","trener","range","progress","console","log","stations","fares","fare","schedules","schedule","users","holidays","feriados","RECORDS","holiday","getAll","tableName","getStationWhitName","nameStation","where","getNexTimesSchedules","stationDirection","typeDay","origin","time","limache","destinationQuery","orderBy","getRangeNow","nowInCheduleFormat","getFareUser","originSection","destinationSection","rangeCode","userCode","loadSuccess","type","LOAD_SUCCESS","loadFailure","LOAD_FAILURE","queryDb","params","QUERY_DB","setStateValue","keyState","valueState","SET_STATE_VALUE","calcResults","CALC_RESULTS","MyData","swModal","toggleModal","dispatch","useDispatch","useSelector","state","userType","userCodeRef","user","String","onSelectedOption","find","GET_ALL","newVal","Travels","destination","typeItemRef","titleModalRef","stationRef","station","onShowModal","selectedStation","DataList","next","cost","travelTime","history","useHistory","push","ERoutes","NEXT_TRAINS","ALL_COSTS_NOW","TravelsList","NextTrains","nextTrains","AllCostNow","costs","Content","location","useLocation","pathname","TRAVELS","MY_DATA","exact","path","component","AllCostsNow","header","IconBack","Palette","ChevronLeft","BackButton","Header","footer","Tab","Tabs","activeTab","handlerClick","INITIAL_STATE","Loading","Layout","titleHeader","loading","refLoading","INIT_DB","basename","process","appStateLocal","localStorage","getItem","hasOwnProperty","obj","Object","prototype","call","JSON","parse","error","section","category","setItem","stringify","ETypeDay","reducer","action","rootReducer","combineReducers","makeDateFormatDayMonth","today","Date","getDate","padStart","getMonth","makeDateFormatSchedule","now","getHours","getMinutes","getSeconds","isNowHoliday","Queries","fecha","getTypeDay","nowDay","toLocaleDateString","weekday","SEMANA","DOMINGOoFESTIVO","SABADO","getDirection","direction","getNextTimes","directionName","GET_STATION_WHIT_NAME","timeFormat","GET_NEXT_TIMES_SCHEDULES","nextTimes","makeNextLabel","labelTime","hString","mString","h","m","timeString","diff","getFullYear","getTime","hh","Math","floor","mm","ceil","minAprox","getCostItemLists","GET_RANGE_NOW","labelCostUser","GET_FARE_USER","calcResultsSaga","queryDbSaga","countdown","eventChannel","emitter","iv","setInterval","clearInterval","intervalCalcNexTrain","select","nextLabel","put","nextTime","timeOrigin","timeDestination","travelTimeLabel","abs","channel","takeEvery","res","rootSaga","takeLatest","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","run","App","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8f59e79c.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components'\r\n\r\nexport default createGlobalStyle`\r\n  *{\r\n    padding: 0;\r\n    margin: 0;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  html, body, #root{\r\n    height: 100vh;\r\n    font-family: Roboto, sans-serif;\r\n  }\r\n\r\n  *, button, input{\r\n    border: 0;\r\n    outline: 0;\r\n  }\r\n\r\n  :root {\r\n    --primary: #D4D9E3;\r\n    --secondary: #222;\r\n\r\n    --tertiary: #110f0f;\r\n\r\n    --active: #323232;\r\n\r\n    --white: #fff;\r\n    --black: #000;\r\n    --gray: #A9A9A9;\r\n    --link: #566E98;\r\n\r\n    --focus:#1E90FF;\r\n\r\n    --text-white: #FFF;\r\n    --text-black: #000;\r\n    --text-blue: blue;\r\n  }`","import styled from 'styled-components'\r\n\r\n//HE - header\r\n//CO - Content\r\n//FO - Footer\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-template-rows: 55px auto  55px;\r\n  \r\n  /* grid-template-columns: 90px auto 90px;\r\n  \r\n  grid-template-areas:\r\n  'HE HE HE' \r\n  'CO CO CO' \r\n  'FO FO FO'; */\r\n\r\n  grid-template-columns: auto;\r\n\r\n\r\n  grid-template-areas:\r\n  'HE' \r\n  'CO' \r\n  'FO';\r\n  height: 100vh;\r\n\r\n  /* @media (max-width:320px){\r\n    grid-template-areas:\r\n    'HE' \r\n    'CO' \r\n    'FO';\r\n  }\r\n\r\n  grid-template-columns:  auto ; */\r\n`;\r\n\r\nexport default Grid;","import styled, { keyframes } from 'styled-components'\r\nimport { IButton, ETheme } from '.'\r\n\r\n\r\nexport const OverlayStyled = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1040;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background-color: #000;\r\n  opacity: .5;\r\n\r\n`;\r\n\r\n\r\nexport const ModalWrapperStyled = styled.div`\r\n  display: inline-table;\r\n  position: fixed;\r\n  padding: .5rem;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1050;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  outline: 0;\r\n  border-radius: .3rem;\r\n\r\n`;\r\n\r\n\r\n\r\nconst fadeIn = keyframes` {\r\n  from {\r\n    opacity: 0;\r\n    transform: translate3d(0, 30%, 0);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n}`\r\n\r\nexport const ModalStyled = styled.div`\r\n\r\n  z-index: 100;\r\n  background: white;\r\n  position: relative;\r\n  margin: 1.75rem auto;\r\n  border-radius: 3px;\r\n  pointer-events: none;\r\n\r\n  border-radius: .3rem;\r\n\r\n  /* Animation  */\r\n\r\n  animation-duration: .5s;\r\n  animation-fill-mode: both;\r\n  animation-name: ${fadeIn};\r\n`;\r\n\r\n\r\n\r\nexport const ModalContendStyled = styled.div`\r\n  pointer-events: auto;\r\n`;\r\n\r\nexport const ModalHeaderStyled = styled.div`\r\n\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding:  1rem;\r\n\r\n  border-top-right-radius: .3rem;\r\n  border-top-left-radius: .3rem;\r\n\r\n  background-color: var(--secondary);\r\n  color: var(--white);\r\n  /**glossy */\r\n\tbackground-image: linear-gradient(\r\n\t\t180deg,\r\n\t\thsla(0, 0%, 100%, 0.3),\r\n\t\thsla(0, 0%, 100%, 0) 50%,\r\n\t\trgba(0, 0, 0, 0.12) 51%,\r\n\t\trgba(0, 0, 0, 0.04)\r\n\t) !important;\r\n\r\n`;\r\n\r\nexport const ModalCloseButtonStyled = styled.div`\r\n\r\n  padding: 1rem;\r\n  background: transparent;\r\n  margin: -1rem -1rem -1rem auto;\r\n  font-size: 1.4rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: var(--white);\r\n  opacity: .3;\r\n  cursor: pointer;\r\n  border: none;\r\n  outline: 0 !important;\r\n\r\n  &:hover{\r\n    opacity: .8;\r\n    text-decoration: none;\r\n  }\r\n`;\r\n\r\nexport const ModalBodyStyled = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  background-color: #fff;\r\n  border-radius: .3rem;\r\n  min-height: 50vh;\r\n`;\r\n\r\nexport const ModalBodyStyleStyled = styled.div`\r\n \r\n`;\r\n\r\nexport const ModalFooterStyled = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  width: 100%;\r\n\r\n  border-bottom-right-radius: .3rem;\r\n  border-bottom-left-radius: .3rem;\r\n\r\n  padding:  .5rem 1rem;\r\n\r\n  \r\n  background-color: var(--secondary);\r\n  color: var(--white);\r\n  /**glossy */\r\n\tbackground-image: linear-gradient(\r\n\t\t180deg,\r\n\t\thsla(0, 0%, 100%, 0.3),\r\n\t\thsla(0, 0%, 100%, 0) 50%,\r\n\t\trgba(0, 0, 0, 0.12) 51%,\r\n\t\trgba(0, 0, 0, 0.04)\r\n\t) !important;\r\n`;\r\n\r\n\r\n\r\nexport const ButtonStyled = styled.button<IButton>`\r\n\tpadding: 10px 15px !important;\r\n\r\n  border-radius: 4px;\r\n  margin-left: 8px;\r\n\r\n  cursor: pointer;\r\n  background-color: ${(props) => props.color}!important;\r\n  color:${(props) => (props.color === ETheme.PRIMARY ? 'var(--white)' : 'var(--black)')}!important;\r\n\r\n  box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.2), 0 3px 3px 0 rgba(0, 0, 0, 0.19);\r\n\r\n  background-image: ${(props) =>\r\n      props.glossy !== undefined\r\n        ? 'linear-gradient(180deg,hsla(0,0%,100%,0.3),hsla(0,0%,100%,0) 50%,rgba(0,0,0,0.12) 51%,rgba(0,0,0,0.04))!important;'\r\n        : null};\r\n\r\n  opacity: 1;\r\n\r\n  \r\n  &:hover{\r\n    opacity: 0.9;\r\n    background: currentColor;\r\n  }\r\n`\r\n\r\n\r\n","import React, { useState, useRef } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n\tButtonStyled,\r\n\tModalBodyStyled,\r\n\tModalCloseButtonStyled,\r\n\tModalContendStyled,\r\n\tModalHeaderStyled,\r\n\tModalStyled,\r\n\tModalWrapperStyled,\r\n\tOverlayStyled,\r\n\tModalFooterStyled\r\n} from './styles'\r\n\r\nexport enum ETheme {\r\n\tPRIMARY = 'var(--focus)',\r\n\tSECONDARY = 'var(--gray)'\r\n}\r\n\r\nexport interface IButton {\r\n\tlabel?: string\r\n\tonClick: () => void\r\n  color: ETheme\r\n\tglossy?: boolean\r\n\r\n}\r\n\r\nexport const ButtonCmp:React.FC<IButton> = (props) => {\r\n\treturn <ButtonStyled {...props}>{props.label}</ButtonStyled>\r\n}\r\n\r\n// export interface IOptionsDialog {\r\n// \ttitle?: string\r\n// \tbuttons?: React.FC<IButton>[]\r\n\r\n// \tonShow?: () => void\r\n//   onHide?: () => void\r\n//   closeButton?: boolean\r\n//   message?: string\r\n//   overlayClose?:boolean\r\n//   onOverlayClicked?:()=> void\r\n// \tonEscapeKeyDown?: () => void\r\n// \tkeyboardClose?: boolean\r\n// }\r\n\r\n\r\nexport const useModal = ():[boolean,  () => void] =>{\r\n  const [isShowing, setIsShowing] = useState(false)\r\n\r\n  const toggle = ()=>{\r\n    let timeoutHack:number\r\n    timeoutHack = setTimeout(() => {\r\n      setIsShowing(!isShowing)\r\n      clearTimeout(timeoutHack)\r\n    }, 10)\r\n  }\r\n  return[\r\n    isShowing,\r\n    toggle\r\n\t]\r\n}\r\n\r\ninterface props {\r\n\tisShowing: boolean\r\n\thide(): void\r\n  onOk(): void\r\n\ttitle:string\r\n\tbuttons?: React.FC<IButton>[]\r\n}\r\n\r\nconst Modal:React.FC<props> = ({ isShowing, hide, title, buttons, onOk, children }) => {\r\n    const handleOverlayClicked = (e:React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    if ((e.target as HTMLDivElement)?.id !== 'wrapper') {\r\n      return;\r\n    }\r\n    hide()\r\n\t}\r\n\t\r\n\tconst bodyRef = useRef<React.ReactNode>(<div>cargando...</div>) \r\n\tbodyRef.current = children\r\n\t// const renderBody = (sw:boolean = false)=>{\r\n\t// \tif(!sw){\r\n\t// \t\tconst cto = setTimeout(()=>{\r\n\t// \t\t\tconsole.log('renderBody');\r\n\t// \t\t\trenderBody(true)\r\n\t// \t\t\tclearTimeout(cto)\r\n\t// \t\t}, 500)\r\n\t// \t\tbodyRef.current =  <div>cargando...</div>\r\n\t// \t}else{\r\n\t// \t\tconsole.log('rerender');\r\n\t// \t\tbodyRef.current =  children\r\n\t// \t} \r\n\t// }\r\n\t// useEffect(()=>{\r\n\t// \tconsole.log('setTimeout');\r\n\t// \tconst cto = setTimeout(()=>{\r\n\t// \t\tbodyRef.current = children\r\n\t// \t\tclearTimeout(cto)\r\n\t// \t}, 1000)\r\n\t// },[children])\r\n\r\n\treturn isShowing\r\n\t\t? ReactDOM.createPortal(\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<OverlayStyled />\r\n\t\t\t\t\t<ModalWrapperStyled aria-modal aria-hidden tabIndex={-1} role='dialog' id=\"wrapper\" onClick={handleOverlayClicked} >\r\n\t\t\t\t\t\t<ModalStyled>\r\n\t\t\t\t\t\t\t<ModalContendStyled>\r\n\t\t\t\t\t\t\t\t<ModalHeaderStyled>\r\n                  <h3>{title}</h3>\r\n\t\t\t\t\t\t\t\t\t<ModalCloseButtonStyled data-dismiss='modal' aria-label='Close' onClick={hide}>\r\n\t\t\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t\t\t</ModalCloseButtonStyled>\r\n\t\t\t\t\t\t\t\t</ModalHeaderStyled>\r\n\t\t\t\t\t\t\t\t<ModalBodyStyled>\r\n\t\t\t\t\t\t\t\t{bodyRef.current}\r\n\t\t\t\t\t\t\t\t</ModalBodyStyled>\r\n\t\t\t\t\t\t\t\t<ModalFooterStyled>\r\n\t\t\t\t\t\t\t\t\t{(buttons && buttons.length > 0)?buttons.map(button=>button):<React.Fragment><ButtonCmp color={ETheme.SECONDARY} label=\"Cancelar\" glossy onClick={hide}/><ButtonCmp color={ETheme.PRIMARY} label=\"Ok\" glossy onClick={onOk}/></React.Fragment>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</ModalFooterStyled>\r\n\t\t\t\t\t\t\t</ModalContendStyled>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</ModalStyled>\r\n\t\t\t\t\t\r\n\t\t\t\t\t</ModalWrapperStyled>\r\n\t\t\t\t</React.Fragment>,\r\n\t\t\t\tdocument.body\r\n\t\t\t)\r\n\t\t: null\r\n}\r\n\r\nexport default Modal\r\n\r\n\r\n\r\n// interface IPropsModal {\r\n//   isModalVisible?: boolean\r\n//   hide:()=>void\r\n//   options?:IOptionsDialog\r\n// }\r\n\r\n// const ModalCmp: React.FC<IPropsModal> = ({isModalVisible, hide, options, children}) => {\r\n\r\n//   const handleOverlayClicked = (e:React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n//     if ((e.target as HTMLDivElement)?.className !== 'modali-wrapper') {\r\n//       return;\r\n//     }\r\n//     if (options === undefined) {\r\n//       hide();\r\n//     } else {\r\n//       if (options.overlayClose !== false) {\r\n//         hide();\r\n//       }\r\n//       if (options.onOverlayClicked) {\r\n//         options.onOverlayClicked();\r\n//       }\r\n//     }\r\n//   }\r\n\r\n//   const renderBody = ()=> {\r\n//     if (children) {\r\n//       return children;\r\n//     } if (options && options.message) {\r\n//       return (\r\n//         <ModalBodyStyleStyled>\r\n//           {options.message}\r\n//         </ModalBodyStyleStyled>\r\n//       );\r\n//     }\r\n//     return false;\r\n//   }\r\n\r\n//   const renderFooter = ()=> {\r\n//     if(!options) return null\r\n//     const { buttons } = options;\r\n//     return (\r\n//       <ModalFooterStyled>\r\n//         {buttons?.map((button, index) => (\r\n//           <React.Fragment\r\n//             key={index}\r\n//           >\r\n//             {button}\r\n//           </React.Fragment>\r\n//         ))}\r\n//       </ModalFooterStyled>\r\n//     );\r\n//   }\r\n\r\n//   return isModalVisible ? ReactDOM.createPortal(\r\n//     <React.Fragment>\r\n//       <OverlayStyled  />\r\n//       <ModalWrapperStyled aria-modal aria-hidden tabIndex={-1} role=\"dialog\" onClick={handleOverlayClicked}>\r\n//         <ModalStyled>\r\n//           <ModalContendStyled>\r\n//             {options !== undefined && options.closeButton === false ? null : (\r\n//               <ModalHeaderStyled>\r\n//                 {options !== undefined && options.title !== undefined && (\r\n//                   <div className=\"modali-title\">\r\n//                     {options.title}\r\n//                   </div>\r\n//                 )}\r\n//                 <ModalCloseButtonStyled data-dismiss=\"modal\" aria-label=\"Close\" onClick={hide}>\r\n//                   <span aria-hidden=\"true\">&times;</span>\r\n//                 </ModalCloseButtonStyled>\r\n//               </ModalHeaderStyled>\r\n//             )}\r\n//             <ModalBodyStyled>\r\n//               {renderBody()}\r\n//             </ModalBodyStyled>\r\n//             {options && options.buttons && options.buttons.length > 0 && renderFooter()}\r\n//           </ModalContendStyled>\r\n//         </ModalStyled>\r\n//       </ModalWrapperStyled>\r\n//     </React.Fragment>, document.body,\r\n//   ) : null;\r\n// }\r\n\r\n// const Dialog = () => {}\r\n// Dialog.Button = ButtonCmp\r\n// Dialog.Modal = ModalCmp\r\n// export default Dialog\r\n\r\n// export const useModal = (options?: IOptionsDialog) => {\r\n// \tconst [ hasToggledBefore, setHasToggledBefore ] = useState(false)\r\n// \tconst [ isModalVisible, setIsModalVisible ] = useState(false)\r\n// \tconst [ isShown, setIsShown ] = useState(false)\r\n// \tconst isModalVisibleRef = useRef(isModalVisible)\r\n// \tisModalVisibleRef.current = isModalVisible\r\n// \tlet timeoutHack: number\r\n// \tconst toggle = ()=> {\r\n// \t\ttimeoutHack = setTimeout(() => {\r\n// \t\t\tsetIsModalVisible(!isModalVisibleRef.current)\r\n// \t\t\tclearTimeout(timeoutHack)\r\n// \t\t}, 10)\r\n// \t\tsetIsShown(!isShown)\r\n// \t\tsetHasToggledBefore(true)\r\n// \t}\r\n\r\n// \tconst handleKeyDown = (event: KeyboardEvent) =>{\r\n// \t\tif (event.keyCode !== 27 || (options && options.keyboardClose === false)) return\r\n// \t\ttoggle()\r\n// \t\tif (options && options.onEscapeKeyDown) {\r\n// \t\t\toptions.onEscapeKeyDown()\r\n// \t\t}\r\n// \t}\r\n\r\n// \tuseEffect(\r\n// \t\t() => {\r\n// \t\t\tif (isShown) {\r\n// \t\t\t\tif (options && options.onShow) {\r\n// \t\t\t\t\toptions.onShow()\r\n// \t\t\t\t}\r\n// \t\t\t\tdocument.addEventListener('keydown', handleKeyDown)\r\n// \t\t\t\tdocument.body.classList.add('modali-open')\r\n// \t\t\t}\r\n// \t\t\tif (!isShown && hasToggledBefore) {\r\n// \t\t\t\tif (options && options.onHide) {\r\n// \t\t\t\t\toptions.onHide()\r\n// \t\t\t\t}\r\n// \t\t\t\tdocument.body.classList.remove('modali-open')\r\n// \t\t\t}\r\n// \t\t\treturn () => document.removeEventListener('keydown', handleKeyDown)\r\n// \t\t},\r\n// \t\t[ isShown ]\r\n// \t)\r\n\r\n// \treturn {\r\n// \t\topt:{\r\n// \t\t\tisShown,\r\n// \t\t\tisModalVisible,\r\n// \t\t\thide: toggle,\r\n// \t\t\toptions\r\n// \t\t},\r\n// \t\ttoggle\r\n//   }\r\n// }\r\n","import styled from 'styled-components';\r\n\r\nimport { ChevronRight } from '@styled-icons/material'\r\n\r\nexport const Li = styled.li`\r\n\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  padding: 15px;\r\n  border: 1px solid  var(--gray);\r\n  border-bottom: none;\r\n  /* border-radius: 15px; */\r\n\r\n  font-size: 1.1rem;\r\n\r\n  width: 100%;\r\n  min-height: 60px;\r\n\r\n  &:first-child{\r\n    border-top-left-radius: 15px;\r\n    border-top-right-radius: 15px;\r\n\r\n  }\r\n\r\n  &:last-child {\r\n    border-bottom: 1px solid  var(--gray);\r\n    border-bottom-left-radius: 15px;\r\n    border-bottom-right-radius: 15px;\r\n  }\r\n\r\n  background-color: var(--white);\r\n\r\n  @media (max-width: 680px){\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n`;\r\n\r\nexport const IconArrowRight = styled(ChevronRight)`\r\n  width: 24px;\r\n  height: 24px;\r\n`\r\n\r\nexport const Anchor = styled.a`\r\n /* text-decoration:underline;\r\n font-style:italic; */\r\n\r\nuser-select: none;\r\n font-weight: 500;\r\n\r\n cursor:pointer;\r\n color: var(--link);\r\n`\r\n","import React from 'react'\r\nimport { Li, IconArrowRight, Anchor } from './styles'\r\n\r\nexport interface IItemList {\r\n\tlabel: string\r\n\tlabelLink: string\r\n}\r\n\r\ninterface OwnProps {\r\n\tonClick?: () => void\r\n\ttypeButton?: boolean\r\n}\r\nconst ItemList: React.FC<IItemList & OwnProps> = ({ label, labelLink, onClick, typeButton }) => {\r\n\tconst makeButtonLink = () => {\r\n\t\treturn typeButton ? (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<span>{labelLink}&nbsp;&nbsp;</span>\r\n\t\t\t</React.Fragment>\r\n\t\t) : (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<span>{labelLink}</span>\r\n\t\t\t\t<IconArrowRight />\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<Li>\r\n\t\t\t<strong>{label}</strong>\r\n\t\t\t{onClick ? <Anchor onClick={onClick}>{makeButtonLink()}</Anchor> : <span>{labelLink}&nbsp;&nbsp;</span>}\r\n\t\t</Li>\t\r\n\t)\r\n}\r\n\r\nexport default ItemList\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  /* display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center; */\r\n\r\n  margin-bottom: 20px;\r\n  \r\n\r\n  min-width: 100%;\r\n  height: 100%;\r\n\r\n  > ul {\r\n    list-style: none;\r\n    min-width: 90%;\r\n  }\r\n\r\n  &:last-child{\r\n    margin-bottom: 0;\r\n  }\r\n\r\n \r\n`;\r\n\r\n\r\nexport const Caption = styled.h3`\r\n  margin-bottom: 6px;\r\n`\r\n","import React from 'react'\r\nimport { Container, Caption } from './styles'\r\n\r\nexport interface Props {\r\n\ttitle: string\r\n}\r\n\r\nconst List: React.FC<Props> = ({title, children }) => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Caption>{title}</Caption>\r\n\t\t\t<ul>{ children}</ul>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default List\r\n","import styled from 'styled-components'\r\n\r\nimport { Clear } from '@styled-icons/material'\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\n\r\nexport const SelectContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-items: center;\r\n  align-items: center;\r\n\r\n  height: 50vh;\r\n\r\n  min-width: 100%;\r\n\r\n  overflow-y: scroll;\r\n\r\n  ::-webkit-scrollbar {\r\n    width: 4px;\r\n    \r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb {\r\n    background-color: var(--secondary);\r\n    /* border-radius: 4px; */\r\n  }\r\n\r\n  ::-webkit-scrollbar-track {\r\n    background-color: var(--primary);\r\n  }\r\n`\r\n\r\nexport const Option = styled.div`\r\n  padding: 15px;\r\n  text-align: center;\r\n  font-weight: 700;\r\n  min-width: 100%;\r\n  color:black;\r\n\r\n  user-select: none;\r\n\r\n  > span {\r\n    cursor:pointer;\r\n    padding: 15px;\r\n  }\r\n\r\n  &.active{\r\n    background-color: var(--focus);\r\n    color: var(--white);\r\n\r\n    background-image:linear-gradient(180deg,hsla(0,0%,100%,0.3),hsla(0,0%,100%,0) 50%,rgba(0,0,0,0.12) 51%,rgba(0,0,0,0.04))!important;\r\n  }\r\n`\r\nexport const ToolInfoBar = styled.div`\r\n  padding: 5px 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  border-bottom: 0.5px solid var(--gray);\r\n\r\n  box-shadow: 0 1px 2px -1px var(--gray);\r\n  \r\n  background-color: var(--white);\r\n\r\n`\r\n\r\n\r\nexport const InputFilter = styled.input`\r\npadding: 7px;\r\nborder: 1px solid black;\r\nborder-radius: 4px;\r\nfont-size: 1.1rem;\r\n\r\nwidth: 200px;\r\n\r\n`\r\n\r\nexport const IconClear = styled(Clear)`\r\n  width: 24px;\r\n  height: 24px;\r\n  color: black;\r\n  margin-left: -27px;\r\n\r\n  cursor: pointer;\r\n`\r\n\r\n","import { nSQL } from '@nano-sql/core'\r\nimport { IStation, tables } from './tables'\r\nimport trener from './trener.json'\r\nimport feriados from './feriado.json'\r\nimport { ETypeDay } from './operations'\r\n\r\n\r\n\r\n\r\nexport enum EQueries {\r\n  GET_ALL = 'getAll',\r\n  INIT_DB = 'initDataBase',\r\n  GET_STATION_WHIT_NAME = 'getStationWhitName',\r\n  GET_NEXT_TIMES_SCHEDULES = 'getNexTimesSchedules',\r\n  GET_RANGE_NOW = 'getRangeNow',\r\n  GET_FARE_USER = 'getFareUser'\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  async initDataBase() {\r\n    const dbList = nSQL().listDatabases()\r\n    if (dbList.length <= 0) {\r\n      await nSQL().createDatabase({\r\n        id: 'TR5NR',\r\n        // mode: new LevelDB(path.join(__dirname, '/db'), false),\r\n        mode: 'PERM',\r\n        tables\r\n      })\r\n      const rows = await nSQL('stations').query('select').exec()\r\n      if (rows.length === 0) {\r\n        return Promise.all([\r\n\r\n          nSQL().rawImport({ ranges:(() => trener.ranges.map((range, index) => ({ ...range, id: index })))() }, false, (progress: number) => { console.log('ranges progress:' + progress) }),\r\n\r\n          nSQL().rawImport({ stations: trener.stations }, false, (progress: number) => { console.log('station progress: ' + progress) }),\r\n\r\n          nSQL().rawImport({ fares: (() => trener.fares.map((fare, index) => ({ ...fare, code: index })))() }, false, (progress: number) => { console.log('fares progress:' + progress) }),\r\n        \r\n          nSQL().rawImport({ schedules: (() => trener.schedules.map((schedule, index) => ({ ...schedule, code: index })))() }, false, (progress: number) => { console.log('schedules progress:' + progress) }),\r\n\r\n          nSQL().rawImport({ users: trener.users }, false, (progress: number) => { console.log('users progress:' + progress) }),\r\n\r\n          nSQL().rawImport({ holidays: (() => feriados.RECORDS.map((holiday, index) => ({ ...holiday, code: index })))() }, false, (progress: number) => { console.log('holidays progress:' + progress) }),\r\n\r\n        ])\r\n      }\r\n      return []//queryResult en este es necesario retornar un array vacio.\r\n    } else {\r\n      return []//queryResult en este es necesario retornar un array vacio.\r\n    }\r\n  },\r\n  getAll(tableName: string) {\r\n    return nSQL(tableName).query('select').exec()\r\n  },\r\n\r\n  getStationWhitName(nameStation: string) {\r\n    return nSQL('stations').query('select').where(['name', '=', nameStation]).exec()\r\n  },\r\n\r\n  getNexTimesSchedules(stationDirection: IStation, typeDay: ETypeDay, origin: IStation, time: number, limache?: IStation) {\r\n\r\n    const destinationQuery = limache ? [['destination', '=', stationDirection.code], 'OR', ['destination', '=', limache.code]] : ['destination', '=', stationDirection.code]\r\n\r\n    return nSQL('schedules').query('select', ['time']).where(\r\n      [\r\n        ['time', '>=', time], 'AND', ['day', '=', typeDay], 'AND', ['origin', '=', origin.code], 'AND', destinationQuery\r\n\r\n      ]\r\n    ).orderBy(['time ASC']).exec()\r\n\r\n  },\r\n\r\n  getRangeNow(nowInCheduleFormat: number) {\r\n    return nSQL('ranges').query('select').where(\r\n      [\r\n        ['start', '<=', nowInCheduleFormat], 'AND', ['end', '>=', nowInCheduleFormat]\r\n        // [nowInCheduleFormat, '>=', 'start' ], 'AND', [nowInCheduleFormat, '<=','end' ]\r\n      ]\r\n    ).exec()\r\n  },\r\n\r\n  // section = tramo\r\n  getFareUser(originSection: number, destinationSection: number, rangeCode: number, userCode: number) {\r\n    return nSQL('fares').query('select').where(\r\n      [\r\n        ['from', '=', originSection], 'AND', ['to', '=', destinationSection], 'AND',\r\n        ['range', '=', rangeCode], 'AND', ['user', '=', userCode]\r\n\r\n      ]\r\n    ).exec()\r\n  }\r\n\r\n}\r\n\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { scrollTo } from '../../utils'\r\nimport { ButtonCmp, ETheme } from '../Dialog'\r\nimport { Container, SelectContainer, Option, ToolInfoBar, InputFilter, IconClear, } from './styles'\r\n\r\nexport interface IOption {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface Props {\r\n\toptions: IOption[]\r\n\tonChange: (value: string) => void\r\n\tonKeyEnter: () => void\r\n\tcurrentValue: string\r\n\ttoolBar?: boolean\r\n}\r\n\r\nconst Select: React.FC<Props> = ({ options, onChange, currentValue, toolBar, onKeyEnter }) => {\r\n\tconst refSelect = useRef<HTMLDivElement>(null)\r\n\r\n\tconst [ active, setActive ] = useState<string>('')\r\n\tconst [ filter, setFilter ] = useState<string>('')\r\n\r\n\tconst refActive = useRef<string>()\r\n\trefActive.current = active\r\n\r\n\tconst refOptionsFielter = useRef<IOption[]>([])\r\n\trefOptionsFielter.current = useMemo(\r\n\t\t() => {\r\n\t\t\tif (filter === '') return options\r\n\t\t\tconst termsArray = filter.toLowerCase().split(' ')\r\n\t\t\treturn options.filter((option) => termsArray.every((term) => option.label.toLowerCase().indexOf(term) > -1))\r\n\t\t},\r\n\t\t[ options, filter ]\r\n\t)\r\n\r\n\t//se memoriza y solo cambia cuando se llama a la [dependencia] si no se obtiene de memoria.\r\n\tconst scrollToActive = useCallback(\r\n\t\t() => {\r\n\t\t\tconst container = refSelect.current\r\n\r\n\t\t\tlet timeoutHack:number\r\n\r\n\t\t\ttimeoutHack = setTimeout(() => {\r\n\t\t\t\tif (container) {\r\n\t\t\t\t\tconst activeElem = container.querySelector('.active') as HTMLDivElement\r\n\t\t\t\t\tscrollTo(container, activeElem?.offsetTop-110, 10)\r\n\t\t\t\t}\r\n\t\t\t\tclearTimeout(timeoutHack)\r\n\r\n\t\t\t}, 10)\r\n\t\t},\r\n\t\t[ refSelect ]//solo cambia si cambia este valor si no se obtiene de memoria\r\n\t)\r\n\r\n\tconst keyboardHandler = useCallback((e:KeyboardEvent)=>{\r\n\t\tconst keyCode = e.code\r\n\t\tconst index = refOptionsFielter.current.findIndex(option=>option.value === refActive.current)\r\n\t\tlet activeCurrent: string = ''\r\n\t\tif(keyCode !== 'ArrowUp' &&\tkeyCode !== 'ArrowDown' && keyCode !== 'Enter'){ return\r\n\t\t}else if(index < 0 && refOptionsFielter.current.length >= 0){\r\n\t\t\tactiveCurrent = refOptionsFielter.current[0].value\r\n\t\t}else{\r\n\t\t\te.preventDefault()\r\n\t\t\tif(keyCode === 'Enter'){\r\n\t\t\t\tonKeyEnter()\r\n\t\t\t}else if(keyCode==='ArrowUp'){\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tactiveCurrent = refOptionsFielter.current[index-1].value\r\n\t\t\t\t}else{\r\n\t\t\t\t\tactiveCurrent = refOptionsFielter.current[refOptionsFielter.current.length-1].value\r\n\t\t\t\t}\r\n\t\t\t}else if(keyCode==='ArrowDown'){\r\n\t\t\t\tif(index < refOptionsFielter.current.length-1){\r\n\t\t\t\t\tactiveCurrent = refOptionsFielter.current[index+1].value\r\n\t\t\t\t}else{\r\n\t\t\t\t\tactiveCurrent = refOptionsFielter.current[0].value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tif(activeCurrent !== ''){\r\n\t\t\tsetActive(activeCurrent+'')\r\n\t\t\tonChange(activeCurrent+'')\r\n\t\t\tscrollToActive()\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, [options])\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetActive(currentValue)\r\n\t\t\tscrollToActive()\r\n\t\t\twindow.document.addEventListener('keydown', keyboardHandler)\r\n\t\t\treturn ()=>window.document.removeEventListener('keydown', keyboardHandler)\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t)\r\n\r\n\tconst handleClick = (value: string) => {\r\n\t\tsetActive(value)\r\n\t\tonChange(value)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t{toolBar !== undefined && toolBar ? (\r\n\t\t\t\t<ToolInfoBar>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<InputFilter value={filter} onChange={(e) => setFilter(e.target.value)} onKeyDown={(e)=>{\r\n\t\t\t\t\t\t\tif(e.keyCode === 27) setFilter('')\r\n\t\t\t\t\t\t}} placeholder='Filtrar' />\r\n\t\t\t\t\t\t<IconClear onClick={() => setFilter('')} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ButtonCmp\r\n\t\t\t\t\t\tglossy\r\n\t\t\t\t\t\tlabel={`Actual:${parseInt(active)+1}`}\r\n\t\t\t\t\t\tcolor={ETheme.PRIMARY}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetFilter('')\r\n\t\t\t\t\t\t\tscrollToActive()\r\n\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t</ToolInfoBar>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t\t<SelectContainer ref={refSelect}>\r\n\t\t\t\t{refOptionsFielter.current.map((option, index) => (\r\n\t\t\t\t\t<Option key={option.value} className={active === option.value ? 'active' : ''}>\r\n\t\t\t\t\t\t<span onClick={() => handleClick(option.value)}>{index+1}. {option.label}</span>\r\n\t\t\t\t\t</Option>\r\n\t\t\t\t))}\r\n\t\t\t</SelectContainer>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Select\r\n","export const scrollTo = (element:Element, to:number, duration: number) => {\r\n  if (duration <= 0) return\r\n  const difference = to - element.scrollTop\r\n  const perTick = difference / duration * 10\r\n\r\n  setTimeout(() => {\r\n    element.scrollTop = element.scrollTop + perTick\r\n    if (element.scrollTop === to) return\r\n    scrollTo(element, to, duration - 10)\r\n  }, 10)\r\n}","import { InanoSQLTableConfig } from \"@nano-sql/core/lib/interfaces\";\r\n\r\n\r\n\r\nexport interface IHoliday {\r\n  code: number\r\n\r\n  fecha: string\r\n}\r\n\r\nexport interface IUser {\r\n  code: number\r\n\r\n  name: string\r\n  category: string\r\n\r\n}\r\nexport interface ISchedule {\r\n  code: number\r\n\r\n  origin: number\r\n  destination: number\r\n  day: number\r\n  time: number\r\n}\r\n\r\nexport interface IRange {\r\n  id:number\r\n\r\n  code: number\r\n  name: string\r\n  start: number\r\n  end: number\r\n  category: string\r\n}\r\n\r\nexport interface IFare {\r\n  code:number\r\n\r\n  from: number\r\n  to: number\r\n  ranges: number\r\n  user: number\r\n  cost: number\r\n}\r\n\r\nexport interface IStation {\r\n  code: number\r\n\r\n  name: string\r\n  section: number\r\n  time: number\r\n  type: number\r\n}\r\n\r\nexport const tables: InanoSQLTableConfig[] = [\r\n  {\r\n    name: 'stations',\r\n    model: {\r\n      'code:int': { ai: true, pk: true },\r\n      'name:string': { default: '', notNull: true },\r\n      'section:number': { default: 0, notNull: true },\r\n      'time:number': { default: 0, notNull: true },\r\n      'type:number': { default: 0, notNull: true }\r\n    }\r\n  },\r\n\r\n  {\r\n    name: 'fares',\r\n    model: {\r\n      'code:int': { ai: true, pk: true },\r\n\r\n      'from:number': { default: 0, notNull: true },\r\n      'to:number': { default: 0, notNull: true },\r\n      'ranges:number': { default: 0, notNull: true },\r\n      'user:number': { default: 0, notNull: true },\r\n      'cost:number': { default: 0, notNull: true }\r\n    }\r\n  },\r\n\r\n  {\r\n    name: 'ranges',\r\n    model: {\r\n      'id:int': { ai: true, pk: true },\r\n\r\n      'code:number': { default: 0, notNull: true },\r\n      'name:string': { default: '', notNull: true },\r\n      'start:number': { default: 0, notNull: true },\r\n      'end:number': { default: 0, notNull: true },\r\n      'category:string': { default: 0, notNull: true },\r\n\r\n    }\r\n  },\r\n\r\n  {\r\n    name: 'schedules',\r\n    model: {\r\n      'code:int': { ai: true, pk: true },\r\n\r\n      'origin:number': { default: 0, notNull: true },\r\n      'destination:number': { default: 0, notNull: true },\r\n      'day:number': { default: 0, notNull: true },\r\n      'time:number': { default: 0, notNull: true },\r\n    }\r\n  },\r\n  {\r\n    name: 'users',\r\n    model: {\r\n      'code:int': { ai: true, pk: true },\r\n      'name:string': { default: '', notNull: true },\r\n      'category:string': { default: '', notNull: true },\r\n    }\r\n  },\r\n\r\n  {\r\n    name: 'holidays',\r\n    model: {\r\n      'code:int': { ai: true, pk: true },\r\n      'date:string': { default: '', notNull: true },\r\n    }\r\n  },\r\n]","\r\nimport { EQueries } from \"../../../services/queries\";\r\n\r\nexport enum ActionTypes {\r\n\r\n  // LOAD_REQUEST = '@session/LOAD_REQUEST',\r\n\r\n  LOAD_SUCCESS = '@session/LOAD_SUCCESS',\r\n  LOAD_FAILURE = '@session/LOAD_FAILURE',\r\n\r\n  QUERY_DB = '@session/QUERY_DB',\r\n  SET_STATE_VALUE = '@session/SET_STATE_VALUE',\r\n  CALC_RESULTS = '@session/CALC_RESULTS',\r\n}\r\n\r\n\r\n// export const loadRequest = () => ({ type: ActionTypes.LOAD_REQUEST })\r\n// data: any\r\nexport const loadSuccess = ( ) => ({ type: ActionTypes.LOAD_SUCCESS})\r\nexport const loadFailure = () => ({ type: ActionTypes.LOAD_FAILURE })\r\n\r\n\r\nexport const queryDb = (query: EQueries, params?:string) => ({ type: ActionTypes.QUERY_DB, query, params })\r\n\r\nexport const setStateValue = (keyState?: string, valueState?: any) => ({ type: ActionTypes.SET_STATE_VALUE, keyState, valueState })\r\n\r\nexport const calcResults = () => ({ type: ActionTypes.CALC_RESULTS })\r\n\r\n","import React, { useMemo, useRef } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport Modal, { useModal } from '../../components/Dialog'\r\nimport ItemList from '../../components/ItemList'\r\nimport List from '../../components/List'\r\nimport Select from '../../components/Select'\r\nimport { EQueries } from '../../services/queries'\r\nimport { AppState } from '../../store/ducks/rootReducer'\r\nimport { queryDb, setStateValue } from '../../store/ducks/trener/actions'\r\n\r\nconst MyData: React.FC = () => {\r\n\tconst [ swModal, toggleModal ] = useModal()\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst { users, userType } = useSelector((state: AppState) => state.trener)\r\n\r\n\tconst userCodeRef = useRef<string>('')\r\n\r\n\tconst options = useMemo(\r\n\t\t() => {\r\n\t\t\treturn users.map((user) => ({ label: user.name, value: String(user.code) }))\r\n\t\t},\r\n\t\t[ users ]\r\n\t)\r\n\r\n\tconst onSelectedOption = () => {\r\n\t\tconst userType = users.find((user) => String(user.code) === String(userCodeRef.current))\r\n\t\tif (userType) dispatch(setStateValue('userType', userType))\r\n\r\n\t\ttoggleModal()\r\n\t}\r\n\tconst onShowModal = () => {\r\n\t\tuserCodeRef.current = String(userType?.code)\r\n\t\tdispatch(queryDb(EQueries.GET_ALL, 'users'))\r\n\t\ttoggleModal()\r\n\t}\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<List title='Datos Del Usuario'>\r\n\t\t\t\t<ItemList label='Tipo Usuario' labelLink={userType.name} onClick={onShowModal} typeButton />\r\n\t\t\t</List>\r\n\r\n\t\t\t<Modal isShowing={swModal} hide={toggleModal} title='Tipo Usuario' onOk={onSelectedOption}>\r\n\t\t\t\t<Select\r\n\t\t\t\t\toptions={options}\r\n\t\t\t\t\tcurrentValue={userCodeRef.current}\r\n\t\t\t\t\tonChange={(newVal) => (userCodeRef.current = newVal)}\r\n\t\t\t\t\tonKeyEnter={onSelectedOption}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default MyData\r\n","import React, { useRef, useMemo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Modal, { useModal } from '../../../components/Dialog'\r\nimport List from '../../../components/List'\r\nimport ItemList from '../../../components/ItemList'\r\nimport { AppState } from '../../../store/ducks/rootReducer'\r\nimport { queryDb, setStateValue, calcResults } from '../../../store/ducks/trener/actions'\r\nimport Select from '../../../components/Select'\r\nimport { EQueries } from '../../../services/queries'\r\n\r\nconst Travels: React.FC = () => {\r\n\tconst [ swModal, toggleModal ] = useModal()\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst state = useSelector((state: AppState) => state)\r\n\r\n\tconst {origin, destination, stations} = state.trener\r\n\r\n\t//Aqui se explica por que se utiliza esto*(refs): https://stackoverflow.com/questions/57847594/react-hooks-accessing-up-to-date-state-from-within-a-callback\r\n\t// NOTA.-: useStatecausa re-render, useRef no lo hace.\r\n\t//Otra gran diferencia es que establecer un estado es asncrono y establecer una referencia es sncrono\r\n\r\n\tconst typeItemRef = useRef<string>('')\r\n\tconst titleModalRef = useRef<string>('')\r\n\tconst stationRef = useRef<string>('')\r\n\r\n\r\n\tconst options = useMemo(\r\n\t\t() => {\r\n\t\t\treturn stations.map((station) => ({ label: station.name, value: String(station.code) }))\r\n\t\t},\r\n\t\t[ stations ]\r\n\t)\r\n\r\n\r\n\tconst onShowModal = (type: string) => {\r\n\t\ttypeItemRef.current = type\r\n\t\tif (type === 'origin') {\r\n\t\t\tstationRef.current = String(origin?.code)\r\n\t\t\ttitleModalRef.current = 'Estacion Origen'\r\n\t\t} else {\r\n\t\t\tstationRef.current = String(destination?.code)\r\n\t\t\ttitleModalRef.current = 'Estacion Destino'\r\n\t\t}\r\n\t\tdispatch(queryDb(EQueries.GET_ALL, 'stations'))\r\n\t\ttoggleModal()\r\n\t}\r\n\r\n\r\n\tconst onSelectedOption = () => {\r\n\t\tif(stationRef.current === '') return \r\n\t\tconst selectedStation = stations.find((station) => String(station.code) === stationRef.current)\r\n\t\tdispatch(setStateValue(typeItemRef.current, selectedStation))\r\n\t\t\r\n\t\tdispatch(calcResults())\r\n\r\n\t\t\r\n\t\ttoggleModal()\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<List title='Viajes'>\r\n\t\t\t\t<ItemList label='Origen' labelLink={origin?.name} onClick={() => onShowModal('origin')} typeButton/>\r\n\t\t\t\t<ItemList label='Destino' labelLink={destination?.name} onClick={() => onShowModal('destination')} typeButton/>\r\n\t\t\t</List>\r\n\r\n\t\t\t<Modal isShowing={swModal} hide={toggleModal} title={titleModalRef.current} onOk={onSelectedOption}>\r\n\t\t\t\t<Select\r\n\t\t\t\t\toptions={options}\r\n\t\t\t\t\tcurrentValue={stationRef.current}\r\n\t\t\t\t\tonChange={(newVal) => (stationRef.current = newVal)}\r\n\t\t\t\t\tonKeyEnter={onSelectedOption}\r\n\t\t\t\t\ttoolBar\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default Travels\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-content: center;\r\n\r\n  min-width: 100%;\r\n`;\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { ERoutes } from '../../../components/Content'\r\nimport ItemList from '../../../components/ItemList'\r\nimport List from '../../../components/List'\r\n\r\nimport { AppState } from '../../../store/ducks/rootReducer'\r\n\r\nconst DataList: React.FC = () => {\r\n\tconst { next, cost, travelTime, userType } = useSelector((state: AppState) => state.trener)\r\n\tconst history = useHistory()\r\n\r\n\tconst viewNextTrains = () => {\r\n\t\thistory.push(ERoutes.NEXT_TRAINS)\r\n\t}\r\n\tconst viewAllCosts = () => {\r\n\t\thistory.push(ERoutes.ALL_COSTS_NOW)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<List title='Datos'>\r\n\t\t\t\t<ItemList label='Proximo' labelLink={next} onClick={viewNextTrains} />\r\n\t\t\t\t<ItemList label={`Costo ${userType.name}`} labelLink={cost} onClick={viewAllCosts} />\r\n\t\t\t\t<ItemList label='Tiempo de Viaje' labelLink={travelTime} />\r\n\t\t\t</List>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default DataList\r\n","import React from 'react'\r\nimport TravelsList from './TravelsList'\r\nimport {Container} from './styles'\r\nimport DataList from './DataList'\r\n\r\nconst Travels: React.FC = () => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<TravelsList />\r\n\t\t\t<DataList />\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Travels\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport ItemList from '../../../components/ItemList'\r\nimport List from '../../../components/List'\r\nimport { AppState } from '../../../store/ducks/rootReducer'\r\n\r\nconst NextTrains: React.FC = () => {\r\n\tconst {nextTrains, destination} = useSelector((state: AppState) => state.trener)\r\n\treturn (\r\n\t\t<List title={`Proximas Salidas hacia \"${destination.name}\" (${nextTrains.length})`}>\r\n\t\t\t{nextTrains.map(({ label, labelLink }, index) => (\r\n\t\t\t\t<ItemList key={index} label={label} labelLink={labelLink} />\r\n\t\t\t))}\r\n\t\t</List>\r\n\t)\r\n}\r\nexport default NextTrains\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport ItemList from '../../../components/ItemList'\r\nimport List from '../../../components/List'\r\nimport { AppState } from '../../../store/ducks/rootReducer'\r\n\r\nconst AllCostNow: React.FC = () => {\r\n\tconst costs = useSelector((state: AppState) => state.trener.costs)\r\n\r\n\treturn (\r\n\t\t<List title='Costos segun perfil'>\r\n\t\t\t{costs.map((cost, index) => <ItemList key={index} {...cost} />)}\r\n\t\t</List>\r\n\t)\r\n}\r\n\r\nexport default AllCostNow\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  grid-area: CO;\r\n  \r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n\r\n  overflow-y: scroll;\r\n  scroll-behavior: smooth;\r\n\r\n  min-height: calc(100vh - 55px - 55px);\r\n  padding: 20px 20%;\r\n  background-color: var(--primary);\r\n\r\n\r\n  ::-webkit-scrollbar {\r\n    width: 4px;\r\n    \r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb {\r\n    background-color: var(--secondary);\r\n    /* border-radius: 4px; */\r\n  }\r\n\r\n  ::-webkit-scrollbar-track {\r\n    background-color: var(--primary);\r\n  }\r\n\r\n  @media (max-width: 680px) {\r\n    padding: 20px 20px;\r\n  }\r\n`;\r\n","import React, { useEffect } from 'react'\r\n\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport MyData from '../../pages/MyData'\r\nimport Travels from '../../pages/Travels/Home'\r\nimport NextTrains from '../../pages/Travels/NextTrains'\r\nimport AllCostsNow from '../../pages/Travels/AllCostsNow'\r\n\r\nimport { Route, Switch, Redirect, useLocation } from 'react-router-dom'\r\n\r\nimport { Container } from './styles'\r\nimport { setStateValue } from '../../store/ducks/trener/actions'\r\n\r\nexport enum ERoutes {\r\n\tTRAVELS = '/travels',\r\n\tNEXT_TRAINS = '/travels/next_trains',\r\n\tALL_COSTS_NOW = '/travels/all_costs_now',\r\n\r\n\tMY_DATA = '/data'\r\n}\r\n\r\nconst Content: React.FC = () => {\r\n\tconst location = useLocation()\r\n\tconst dispatch = useDispatch()\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (location.pathname === ERoutes.TRAVELS) {\r\n\t\t\t\tdispatch(setStateValue('titleHeader', 'TR5NR'))\r\n\t\t\t\tdispatch(setStateValue('activeTab', ERoutes.TRAVELS))\r\n\r\n\t\t\t}else if(location.pathname === ERoutes.NEXT_TRAINS){\r\n\t\t\t\tdispatch(setStateValue('titleHeader', 'Proximos Trenes'))\r\n\t\t\t\tdispatch(setStateValue('activeTab', ERoutes.TRAVELS))\r\n\t\t\t\r\n\t\t\t}else if(location.pathname === ERoutes.ALL_COSTS_NOW){\r\n\t\t\t\tdispatch(setStateValue('titleHeader', 'Costos Hora Alta'))\r\n\t\t\t\tdispatch(setStateValue('activeTab', ERoutes.TRAVELS))\r\n\t\t\t\r\n\t\t\t} else if (location.pathname === ERoutes.MY_DATA) {\r\n\t\t\t\tdispatch(setStateValue('titleHeader', 'Mis Datos'))\r\n\t\t\t\tdispatch(setStateValue('activeTab', ERoutes.MY_DATA))\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ dispatch, location ]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path='/'>\r\n\t\t\t\t\t<Redirect to={ERoutes.TRAVELS} />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route exact path={ERoutes.TRAVELS} component={Travels} />\r\n\t\t\t\t<Route exact path={ERoutes.NEXT_TRAINS} component={NextTrains} />\r\n\t\t\t\t<Route exact path={ERoutes.ALL_COSTS_NOW} component={AllCostsNow} />\r\n\r\n\t\t\t\t<Route exact path={ERoutes.MY_DATA} component={MyData} />\r\n\t\t\t</Switch>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Content\r\n","import styled from 'styled-components';\r\n\r\nimport { Palette, ChevronLeft } from '@styled-icons/material'\r\n\r\nexport const Container = styled.header`\r\n  grid-area: HE;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  background-color: var(--secondary);\r\n\r\n  /**glossy */\r\n  background-image: linear-gradient(180deg,hsla(0,0%,100%,0.3),hsla(0,0%,100%,0) 50%,rgba(0,0,0,0.12) 51%,rgba(0,0,0,0.04))!important;\r\n\r\n  color: var(--text-white);\r\n\r\n  \r\n  \r\n`;\r\n\r\nexport const Button = styled.button`\r\n  border-radius: 50%;\r\n  \r\n  cursor: pointer;\r\n\r\n`;\r\n\r\nexport const IconToggleTheme = styled(Palette)`\r\n  width: 24px;\r\n  height: 24px;\r\n`;\r\n\r\n\r\n\r\nexport const IconBack = styled(ChevronLeft)`\r\n  width: 24px;\r\n  height: 24px;\r\n`;\r\n\r\nexport const BackButton =  styled.button`\r\n  padding:5px 10px;\r\n    margin-right: 30px;\r\n\r\n  background-color: var(--primary);\r\n  /**glossy */\r\n  background-image: linear-gradient(180deg,hsla(0,0%,100%,0.3),hsla(0,0%,100%,0) 50%,rgba(0,0,0,0.12) 51%,rgba(0,0,0,0.04))!important;\r\n\r\n  border-radius: 25px 8px 8px 25px;\r\n\r\n  box-shadow: 0 0 2px 0.1px white;\r\n  /* border-bottom-right-radius: 16px; */\r\n  /* border-top-right-radius: 16px; */\r\n\r\n  /* border-bottom-left-radius: 55px 45px; */\r\n  /* border-top-left-radius: 55px 45px; */\r\n\r\n  font-weight: 700;\r\n\r\n  cursor: pointer;\r\n`\r\n","import React from 'react'\r\n\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport { ERoutes } from '../Content'\r\n\r\nimport { Container, BackButton, IconBack } from './styles'\r\n\r\ninterface Props {\r\n\ttitle: string\r\n}\r\nconst Header: React.FC<Props> = ({ title }) => {\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\t// history.goBack()\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t{location.pathname !== ERoutes.TRAVELS ? (\r\n\t\t\t\t<BackButton onClick={() => history.push(ERoutes.TRAVELS)}>\r\n\t\t\t\t\t<IconBack /> TR5NR\r\n\t\t\t\t</BackButton>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t\t<h4>{title}</h4>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Header\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.footer`\r\n  grid-area: FO;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  background-color: var(--secondary);\r\n  /**glossy */\r\n  background-image: linear-gradient(180deg,hsla(0,0%,100%,0.3),hsla(0,0%,100%,0) 50%,rgba(0,0,0,0.12) 51%,rgba(0,0,0,0.04))!important;\r\n  \r\n  color: var(--text-white);\r\n  \r\n`;\r\n\r\nexport const Tab = styled.div`\r\n  height: 100%;\r\n  text-align: center;\r\n  line-height: 55px;\r\n  background-color: var(--tertiary);\r\n\r\n  opacity: 0.5;\r\n\r\n\r\n  padding: 0px 25px;\r\n\r\n  min-width:50%;\r\n  cursor: pointer;\r\n\r\n  border-top: 1px solid transparent;\r\n\r\n\r\n  transition: all 0.2s ease-in-out;\r\n  \r\n \r\n  &.active{\r\n    background-color: var(--active);\r\n    border-top: 1px solid black;\r\n\r\n  }\r\n`\r\n","import React from 'react'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { AppState } from '../../store/ducks/rootReducer'\r\nimport { setStateValue } from '../../store/ducks/trener/actions'\r\n\r\nimport { ERoutes } from '../Content'\r\n\r\nimport { Container, Tab } from './styles'\r\n\r\nconst Tabs: React.FC = () => {\r\n\tconst history = useHistory()\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst activeTab = useSelector((state: AppState) => state.trener.activeTab)\r\n\r\n\tconst handlerClick = (active: ERoutes) => {\r\n\t\tdispatch(setStateValue('activeTab', active))\r\n\r\n\t\thistory.push(active)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Tab onClick={() => handlerClick(ERoutes.TRAVELS)} className={activeTab === ERoutes.TRAVELS ? 'active' : ''}>\r\n\t\t\t\tViajes\r\n\t\t\t</Tab>\r\n\r\n\t\t\t<Tab onClick={() => handlerClick(ERoutes.MY_DATA)} className={activeTab === ERoutes.MY_DATA ? 'active' : ''}>\r\n\t\t\t\tMis datos\r\n\t\t\t</Tab>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Tabs\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top:0;\r\n  left: 0;\r\n\r\n  width:100vw;\r\n  height: 100vh;\r\n  \r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  color: white;\r\n  background-color: black;\r\n  \r\n  opacity: .5;\r\n  \r\n  z-index: 1000;\r\n  user-select: none;\r\n`;\r\n","import { Reducer } from 'redux'\r\nimport { ERoutes } from '../../../components/Content'\r\nimport { ActionTypes } from './actions'\r\nimport { IStation, IUser } from '../../../services/tables';\r\nimport { IItemList } from '../../../components/ItemList';\r\nimport { EQueries } from '../../../services/queries';\r\n\r\n\r\nconst __EMPTY_STRING__ = '______'\r\n\r\nexport interface StateTypes {\r\n  activeTab: ERoutes\r\n  titleHeader: string\r\n  loading: boolean\r\n  error: boolean\r\n\r\n  origin: IStation\r\n  destination: IStation\r\n\r\n  next: string\r\n\r\n  userType: IUser,\r\n  cost: string\r\n\r\n  travelTime: string\r\n\r\n  stations: IStation[]\r\n  users: IUser[]\r\n\r\n  nextTrains: IItemList[]\r\n  costs: IItemList[]\r\n}\r\n\r\nconst appStateLocal = localStorage.getItem('appState')\r\nlet INITIAL_STATE: StateTypes\r\nif (appStateLocal) {\r\n  INITIAL_STATE = JSON.parse(appStateLocal)\r\n} else {\r\n  INITIAL_STATE = {\r\n    activeTab: ERoutes.TRAVELS,\r\n    titleHeader: 'TR5NR',\r\n    loading: true,\r\n    error: false,\r\n\r\n    origin: { code: -1, name: __EMPTY_STRING__, section: -1, time: -1, type: -1 },\r\n    destination: { code: -1, name: __EMPTY_STRING__, section: -1, time: -1, type: -1 },\r\n\r\n    next: __EMPTY_STRING__,\r\n    userType: { code: -1, name: __EMPTY_STRING__, category: '' },\r\n    cost: __EMPTY_STRING__,\r\n\r\n    travelTime: __EMPTY_STRING__,\r\n\r\n    stations: [],\r\n    users: [],\r\n\r\n    nextTrains: [],\r\n    costs: []\r\n  }\r\n  localStorage.setItem('appState', JSON.stringify(INITIAL_STATE))\r\n}\r\n\r\n\r\n// function hasKey<O>(obj: O, key: keyof any): key is keyof O {\r\n//   return key in obj\r\n// }\r\n\r\n// Tomado  de: https://dev.to/kingdaro/indexing-objects-in-typescript-1cgi\r\nfunction hasOwnProperty<O extends object, K extends PropertyKey>(\r\n  obj: O,\r\n  key: K,\r\n\r\n): obj is O & Record<K, unknown> {\r\n  return Object.prototype.hasOwnProperty.call(obj, key);\r\n}\r\n\r\nconst reducer: Reducer<StateTypes> = (state = INITIAL_STATE, action): StateTypes => {\r\n\r\n  switch (action.type) {\r\n\r\n    case ActionTypes.QUERY_DB:\r\n      if (action.query === EQueries.INIT_DB)\r\n        return { ...state, loading: true }\r\n      return state\r\n    case ActionTypes.CALC_RESULTS:\r\n\r\n      return { ...state, loading: true }\r\n\r\n    case ActionTypes.LOAD_SUCCESS:\r\n\r\n      return { ...state, loading: false, error: false }\r\n\r\n    case ActionTypes.LOAD_FAILURE:\r\n\r\n      return { ...state, loading: false, error: true }\r\n\r\n    case ActionTypes.SET_STATE_VALUE:\r\n\r\n      const keyState = action.keyState\r\n\r\n      // [keyState]: action.valueState => state[keyState] = action.valueState\r\n      return hasOwnProperty(state, keyState) ?\r\n        { ...state, loading: false, error: true, [keyState]: action.valueState }\r\n        : { ...state, loading: false, error: true }\r\n\r\n    default:\r\n\r\n      return state\r\n\r\n  }\r\n}\r\n\r\nexport default reducer\r\n\r\n","import React from 'react';\r\n\r\nimport { Container } from './styles';\r\n\r\nconst Loading: React.FC<{label:string}> = ({label}) => {\r\nreturn <Container>{label}</Container>;\r\n}\r\n\r\nexport default Loading;","import React, { useEffect, useRef } from 'react'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport Grid from './styles'\r\n\r\nimport Header from '../Header'\r\nimport Tabs from '../Tabs'\r\nimport Content from '../Content'\r\n\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport { AppState } from '../../store/ducks/rootReducer'\r\n\r\nimport { EQueries } from '../../services/queries'\r\nimport { queryDb } from '../../store/ducks/trener/actions'\r\nimport Loading from '../Loading'\r\n\r\nconst Layout: React.FC = () => {\r\n\tconst { titleHeader, loading } = useSelector((state: AppState) => state.trener)\r\n\tconst refLoading = useRef<boolean>()\r\n\trefLoading.current = loading\r\n\r\n\tconst dispatch = useDispatch()\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tdispatch(queryDb(EQueries.INIT_DB))\r\n\t\t},\r\n\t\t[ dispatch ]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Router basename={process.env.PUBLIC_URL} >\r\n\t\t\t\t<Header title={titleHeader} />\r\n\t\t\t\t<Content />\r\n\t\t\t\t<Tabs />\r\n\t\t\t</Router>\r\n\t\t\t{refLoading.current && refLoading.current === true ? <Loading label='cargando...' /> : null}\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default Layout\r\n","import { IItemList } from '../components/ItemList'\r\nimport Queries, { EQueries } from './queries'\r\nimport { IFare, IHoliday, IRange, IStation, IUser } from './tables'\r\n\r\nexport const __EMPTY_STRING__ = '______'\r\n\r\nexport enum ETypeDay {\r\n  SEMANA = 0,\r\n  DOMINGOoFESTIVO = 1,\r\n  SABADO = 2\r\n}\r\n\r\nconst makeDateFormatDayMonth = () => {\r\n  const today = new Date()\r\n  const dd = String(today.getDate()).padStart(2, '0')\r\n  const mm = String(today.getMonth() + 1).padStart(2, '0')\r\n  // const yyyy = today.getFullYear();\r\n  return dd + '-' + mm\r\n}\r\n\r\nexport const makeDateFormatSchedule = () => {\r\n  const now = new Date()\r\n  return parseInt(\r\n    String(now.getHours()) + String(now.getMinutes()).padStart(2, '0') + String(now.getSeconds()).padStart(2, '0')\r\n  )\r\n}\r\n\r\nexport const isNowHoliday = async () => {\r\n  const now = makeDateFormatDayMonth()\r\n  const holidays = (await Queries[EQueries.GET_ALL]('holidays')) as IHoliday[]\r\n  return holidays.every((holiday) => holiday.fecha === now)\r\n}\r\n\r\n// Entrega si hoy es dia de semana\r\n// domingo o festivo o sabado\r\n// necesario por que las frecuencias de los trenes\r\n// cambian dependiendo del dia\r\nexport const getTypeDay = async () => {\r\n  const nowDay = new Date().toLocaleDateString('en-US', { weekday: 'long' })\r\n  let typeDay = ETypeDay.SEMANA\r\n  if (nowDay === 'Sunday' || (await isNowHoliday())) {\r\n    typeDay = ETypeDay.DOMINGOoFESTIVO\r\n  } else if (nowDay === 'Saturday') {\r\n    typeDay = ETypeDay.SABADO\r\n  }\r\n  return typeDay\r\n}\r\n\r\n// Dado el origen y el destino\r\n// se calcula la direccion del tren\r\n// si va hacia Limache o Hacia Puerto\r\nexport const getDirection = (origin: IStation, destination: IStation) => {\r\n  const goesToPuerto = origin.code >= destination.code\r\n  let direction = 'Puerto'\r\n\r\n  // Ahora hay que verificar si va a una estacion menor o igual a Sgto\r\n  // Aldea. Si va a una estacion superior a Stgo Aldea solo serviran los trenes hacia Limache. Si es menor sirven los trenes a Stgo Aldea o Limache.\r\n  if (!goesToPuerto) {\r\n    // Obtiene todas las estaciones que solo pueden ser alcanzadas por un tren que llegue a Limache\r\n\r\n    const stationsLimacheDirection = ['Peablanca', 'Limache', 'Olmu', 'Quillota', 'La Calera', 'Limache Viejo']\r\n\r\n    direction = stationsLimacheDirection.indexOf(origin.name) > -1 ? 'Limache' : 'Sargento Aldea'\r\n  }\r\n  return direction\r\n}\r\n\r\n// * = async, yield = await\r\nexport const getNextTimes = async (origin: IStation, destination: IStation) => {\r\n  try {\r\n    const directionName = getDirection(origin, destination)\r\n    const stationDirection = (await Queries[EQueries.GET_STATION_WHIT_NAME](directionName))[0] as IStation\r\n\r\n    // console.log(directionName);\r\n\r\n    const typeDay = await getTypeDay()\r\n\r\n    const timeFormat = makeDateFormatSchedule()\r\n    // console.log(timeFormat);\r\n    let nextTimes\r\n\r\n    // En fines de semana y feriados, solo hay trenes a limache\r\n    if (directionName === 'Sargento Aldea' && typeDay === ETypeDay.SEMANA) {\r\n      // Si va Sargento Aldea, Sirven los trenes a Limache y Sargento Aldea\r\n      const limache = (await Queries[EQueries.GET_STATION_WHIT_NAME]('Limache'))[0] as IStation\r\n\r\n      nextTimes = await Queries[EQueries.GET_NEXT_TIMES_SCHEDULES](\r\n        stationDirection,\r\n        typeDay,\r\n        origin,\r\n        timeFormat,\r\n        limache\r\n      )\r\n    } else {\r\n      nextTimes = await Queries[EQueries.GET_NEXT_TIMES_SCHEDULES](stationDirection, typeDay, origin, timeFormat)\r\n    }\r\n    return nextTimes\r\n  } catch (err) {\r\n    return err\r\n  }\r\n}\r\n\r\nexport const makeTimeTravelLabel = (timeOrigin: number, timeDestination: number) => {\r\n  return `${Math.abs(timeOrigin - timeDestination)} Minutos`\r\n}\r\n\r\nexport const makeNextLabel = (time: number) => {\r\n  const now = new Date()\r\n\r\n  const timeString = String(time)\r\n  let labelTime,\r\n    hString,\r\n    mString,\r\n    type,\r\n    h,\r\n    m,\r\n    s = 0\r\n  if (timeString.length === 5) {\r\n    hString = `0${timeString[0]}`\r\n    mString = `${timeString[1]}${timeString[2]}`\r\n  } else {\r\n    hString = `${timeString[0]}${timeString[1]}`\r\n    mString = `${timeString[2]}${timeString[3]}`\r\n  }\r\n\r\n  h = parseInt(hString)\r\n  m = parseInt(mString)\r\n  type = h > 12 || (h === 12 && m > 0) ? 'PM' : 'AM'\r\n  labelTime = `${hString}:${mString} ${type}`\r\n\r\n  const dateSchedule = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m, s)\r\n  // dateSchedule.setHours(h, m, s)\r\n\r\n  let diff = dateSchedule.getTime() - now.getTime()\r\n  const hh = Math.floor(diff / 1000 / 60 / 60)\r\n\r\n  diff -= hh * 1000 * 60 * 60\r\n  const mm = Math.ceil(diff / 1000 / 60)\r\n\r\n  return {\r\n    minAprox: `~ ${hh > 1 ? hh + ' Horas y' : hh === 1 ? '1 Hora y' : ''} ${mm > 1\r\n      ? mm + ' Minutos'\r\n      : mm === 1 ? ' 1 Minuto' : ''}`,\r\n    timeString: `${labelTime}`\r\n  }\r\n}\r\n\r\nexport const getCostItemLists = async (origin: IStation, destination: IStation, userType: IUser) => {\r\n  try {\r\n    const range = (await Queries[EQueries.GET_RANGE_NOW](makeDateFormatSchedule()))[0] as IRange\r\n\r\n    const users = (await Queries[EQueries.GET_ALL]('users')) as IUser[]\r\n\r\n    const costs: IItemList[] = []\r\n    let labelCostUser = __EMPTY_STRING__\r\n\r\n    for (let user of users) {\r\n      const fare = (await Queries[EQueries.GET_FARE_USER](\r\n        origin.section,\r\n        destination.section,\r\n        range.code,\r\n        user.code\r\n      ))[0] as IFare\r\n\r\n      costs.push({ label: user.name, labelLink: `$ ${fare.cost}` })\r\n\r\n      if (user.code === userType.code) labelCostUser = `$ ${fare.cost}`\r\n    }\r\n    return { costs, labelCostUser }\r\n  } catch (err) {\r\n    console.log(err)\r\n    return { costs: [], labelCostUser: __EMPTY_STRING__ }\r\n  }\r\n}\r\n","import { combineReducers } from 'redux'\r\n\r\nimport trener from './trener'\r\n\r\nconst rootReducer = combineReducers({\r\n  trener\r\n})\r\n\r\nexport type AppState = ReturnType<typeof rootReducer>\r\n\r\n\r\nexport default rootReducer","import { put, call, all, select, takeEvery } from 'redux-saga/effects'\r\nimport { eventChannel } from 'redux-saga'\r\nimport { loadSuccess, loadFailure, setStateValue, calcResults } from './actions'\r\nimport Queries, { EQueries } from '../../../services/queries'\r\nimport { AppState } from '../rootReducer'\r\nimport { IItemList } from '../../../components/ItemList'\r\nimport { getCostItemLists, getNextTimes, makeNextLabel, makeTimeTravelLabel, __EMPTY_STRING__ } from '../../../services/operations'\r\n\r\n\r\n\r\n\r\n// tomado de : https://stackoverflow.com/questions/48044439/using-redux-saga-with-setinterval-how-and-when-to-yield?rq=1\r\nfunction countdown(time: number) {\r\n  return eventChannel(emitter => {\r\n    const iv = setInterval(() => {\r\n      emitter('ok')\r\n    }, time);\r\n    // The subscriber must return an unsubscribe function\r\n    return () => {\r\n      clearInterval(iv)\r\n    }\r\n  }\r\n  )\r\n}\r\n\r\n\r\n\r\n/**END OPERATIONS */\r\n\r\nconst intervalCalcNexTrain = function* () {\r\n  const { trener } = (yield select()) as AppState\r\n  const { origin, destination, userType } = trener\r\n\r\n  if (origin.time !== -1 && destination.time !== -1) {\r\n\r\n    // const nextTimes = yield call(getNextTimes, origin, destination)\r\n    const nextTimes = (yield call(getNextTimes, origin, destination)) as { time: number }[]\r\n\r\n    let nextLabel = __EMPTY_STRING__\r\n    if (nextTimes.length > 0) {\r\n      const { minAprox, timeString } = makeNextLabel(nextTimes[0].time)\r\n      nextLabel = `${minAprox} (${timeString})`\r\n    }\r\n\r\n    if (nextLabel === __EMPTY_STRING__) {\r\n      yield all([\r\n        // put(setStateValue('travelTime', __EMPTY_STRING__)),\r\n        // put(setStateValue('costo', __EMPTY_STRING__)),\r\n        put(setStateValue('next', __EMPTY_STRING__)),\r\n        put(setStateValue('nextTrains', [])),\r\n      ])\r\n    } else {\r\n\r\n      const nextTrains = nextTimes.map(nextTime => {\r\n        const { minAprox, timeString } = makeNextLabel(nextTime.time)\r\n        return { label: minAprox, labelLink: timeString }\r\n      })\r\n\r\n      const { costs, labelCostUser } = (yield call(getCostItemLists, origin, destination, userType)) as { costs: IItemList, labelCostUser: string }\r\n\r\n      yield all([\r\n\r\n        put(setStateValue('next', nextLabel)),\r\n        put(setStateValue('cost', labelCostUser)),\r\n        put(setStateValue('costs', costs)),\r\n        put(setStateValue('nextTrains', nextTrains))\r\n\r\n      ])\r\n    }\r\n    localStorage.setItem('appState', JSON.stringify(trener))\r\n\r\n  }\r\n}\r\n\r\nexport function* calcResultsSaga() {\r\n  try {\r\n    // getState in redux-saga?: https://stackoverflow.com/questions/38405700/getstate-in-redux-saga\r\n    //tambin te puede interesar How to get the new state with Redux-Saga?: https://stackoverflow.com/questions/57698825/how-to-get-the-new-state-with-redux-saga\r\n    const { trener } = (yield select()) as AppState\r\n    const { origin, destination, userType } = trener\r\n\r\n    if (origin.time === -1 || destination.time === -1) {\r\n      yield put(loadSuccess())\r\n    } else {\r\n      const travelTimeLabel = makeTimeTravelLabel(origin.time, destination.time)\r\n      // const nextTimes = yield call(getNextTimes, origin, destination)\r\n      const nextTimes = (yield call(getNextTimes, origin, destination)) as { time: number }[]\r\n\r\n      let nextLabel = __EMPTY_STRING__\r\n      if (nextTimes.length > 0) {\r\n        const label = makeNextLabel(nextTimes[0].time)\r\n        nextLabel = `${label.minAprox} (${label.timeString})`\r\n      }\r\n\r\n      const nextTrains = nextTimes.map(nextTime => {\r\n        const { minAprox, timeString } = makeNextLabel(nextTime.time)\r\n        return { label: minAprox, labelLink: timeString }\r\n      })\r\n\r\n      const { costs, labelCostUser } = (yield call(getCostItemLists, origin, destination, userType)) as { costs: IItemList, labelCostUser: string }\r\n\r\n      yield all([\r\n\r\n        put(setStateValue('travelTime', travelTimeLabel)),\r\n        put(setStateValue('next', nextLabel)),\r\n        put(setStateValue('cost', labelCostUser)),\r\n        put(setStateValue('costs', costs)),\r\n        put(setStateValue('nextTrains', nextTrains))\r\n\r\n      ])\r\n\r\n      localStorage.setItem('appState', JSON.stringify(trener))\r\n\r\n\r\n      const channel = yield call(countdown, 1000);\r\n      yield takeEvery(channel, intervalCalcNexTrain);\r\n    }\r\n\r\n  } catch (err) {\r\n    console.log(err);\r\n    yield put(loadFailure())\r\n  }\r\n}\r\n\r\n\r\nexport function* queryDbSaga(action: any) {\r\n  try {\r\n\r\n    const query = action.query as EQueries\r\n    let res, params: string = ''\r\n    if (query === EQueries.GET_ALL) {\r\n      params = action.params as string\r\n      //aqui params es name table ej: stations or users\r\n      res = yield call(Queries[query], params)\r\n    } else {\r\n      res = yield call(Queries[query])\r\n    }\r\n    // console.log(res);\r\n    // if (query === EQueries.INIT_DB) res = []\r\n    // yield put(loadSuccess(res))\r\n\r\n    if (query === EQueries.INIT_DB) {\r\n\r\n      yield all([\r\n\r\n        put(calcResults()),\r\n        put(loadSuccess())\r\n\r\n      ])\r\n\r\n    } else {\r\n\r\n      yield all([\r\n        //aqui params es cualquier key del objeto INITIAL_STATE(interface StateTypes)\r\n        //y res el valor que se asigna \r\n        put(setStateValue(params, res))\r\n      ])\r\n    }\r\n\r\n  } catch (err) {\r\n    yield put(loadFailure())\r\n  }\r\n}\r\n\r\n","import { all, takeLatest } from 'redux-saga/effects'\r\n\r\nimport { ActionTypes } from './trener/actions'\r\n// load,\r\n// startDataBase\r\nimport { queryDbSaga, calcResultsSaga  } from './trener/sagas'\r\n\r\n\r\nexport default function* rootSaga() {\r\n  return yield all([\r\n    // takeLatest(ActionTypes.LOAD_REQUEST, load),\r\n    // takeLatest(ActionTypes.START_DB, startDataBase),\r\n\r\n    // esto interviene la accion ActionTypes.QUERY_DB, se procesa la saga y develve otras acciones(middleware).\r\n    takeLatest(ActionTypes.QUERY_DB, queryDbSaga),\r\n    takeLatest(ActionTypes.CALC_RESULTS, calcResultsSaga)\r\n  ])\r\n}","import { createStore, Store, compose, applyMiddleware } from 'redux'\r\nimport rootReducer, { AppState } from './ducks/rootReducer'\r\n\r\n// for sagas.\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootSaga from './ducks/rootSaga'\r\nconst sagaMiddleware = createSagaMiddleware()\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n\r\nconst store: Store<AppState> = createStore(rootReducer, composeEnhancers(applyMiddleware(sagaMiddleware)))\r\n\r\nsagaMiddleware.run(rootSaga)\r\n\r\nexport default store","import React from 'react'\n\nimport GlobalsStyles from './assets/css/styles'\nimport Layout from '../src/components/Layout'\nimport { Provider } from 'react-redux'\nimport store from './store'\n\n// import LoadData from '../src/components/LoadData'\n\n\nconst App: React.FC = () => {\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<Layout />\n\t\t\t<GlobalsStyles />\n\t\t\t{/* <LoadData /> */}\n\t\t</Provider>\n\t)\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}